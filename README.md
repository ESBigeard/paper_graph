

# Paper Graph
Dev/tools repo for a project about scientific papers mining to construct graphs

[bibliography has been moved to its own file](REFERENCES.md)

If you want to execute the code you can find the corpus [here](https://www.dropbox.com/s/0bc6c2fmhz526mo/fulltext_tei.tar.gz?dl=0]). It's TEI XML files.

## Working pipeline

Various steps need an idf inside a .pickle file. I've added one to the repository for convenience, but you can generate it with utilsperso.py The idf must be trained on a corpus identical or similar than the corpus we're working on.

MAIN : PDF of articles collected by canceropole -> grobit -> TEI XML files -> [generate_gephi_csv.py](generate_gephi_csv.py) -> nodes.csv and edges.csv -> aman's script to add similar nodes and coordinates -> [convert_id_to_tile.py](convert_id_to_title) (aman gives similar nodes by id. this converts the id to the label) -> nodes.csv and edges.csv -> gephi -> GEXF XML file -> [this javascript website with few changes](https://github.com/raphv/gexf-js)

For the html files displaying the content of the articles, input the TEI XML files into [generate_html_article_pages.py](generate_html_article_pages.py)

<pre>
 +--------------------+
 |                    |
 |   PDF articles     |
 |                    |
 +---------+----------+
           |
 +---------v----------+
 |                    |
 |     grobit         |
 |                    |
 +---------+----------+
           |
           |        +----------------------------------+          +------------------------------------+
           |        |  generate_html_article_pages.py  |          | html pages with                    |
           |    +--->                                  +--------->+ the text of the articles           |
           |    |   +----------------------------------+          | and important sentences in yellow  |
           |    |                                                 |                                    |
           |    |                                                 +------------------------------------+
           |    |
 +---------v----+-----+          +--------------------------------------+
 |                    |          | utilsperso.edif_idf()                |
 |      TEI XML files +--------->+ (check the bottom of utilsperso.py   |
 |                    |          | there's a few lines that allow       |
 +--------+-----------+          | standalone launching of              |
          |                      | edit_idf()                           |
+---------v-----------+          |                                      |
|                     |          +-----------------+--------------------+
| generate_gephi_csv.py                            |
|                     |                            |
+----------+----------+            +---------------v----------------+
           |                       | idf.pickle                     |
 +---------v----------+            | I've added an idf file in the  |
 |  nodes.csV         |            | git for convenience, but       |
 |  edges.csv         <------------+ a new one should be            |
 |                    |            | generated for each corpus      |
 +---------+----------+            |                                |
           |                       +--------------------------------+
 +---------v-----------+
 | aman's script       |
 | adds coordinates for|
 | similary view       |
 | and similar nodes   |
 |                     |
 +----------+----------+
            |
 +----------v-------------------------+
 |  convert_id_to_tile.py             |
 |  Aman's script gives similar nodes |
 |  as ID. this converts to           |
 |  node label                        |
 |                                    |
 +---------+--------------------------+
           |
     +-----v-----+
     |   Gephi   |
     +-----+-----+
           |
    +------v------+
    |GEXF XML file|
    +------+------+
           |
+----------v-----------------------+
| this javascript website          |
|https://github.com/raphv/gexf-js  |
| with small changes               |
+----------------------------------+

</pre>

## Main scripts and useful stuff

[takes a folder of tei xml generated by grobit, outputs  nodes.csv and edges.csv ready for gephi](generate_gephi_csv.py)

[necessary to make anything else run](utilsperso.py)

[creates the html pages for each article with the main sentences highlighted in yellow](generate_html_article_pages.py)

[for the most similar nodes added by aman, replace the ID of each node by its label](convert_id_to_title.py)
